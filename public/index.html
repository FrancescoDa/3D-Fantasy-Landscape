<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mystica Fantasy - Peta 3D Interaktif</title>
    <!-- Impor Tailwind CSS melalui CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Anda bisa menambahkan font kustom di sini jika mau */
      /* @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Roboto:wght@300;400;700&display=swap'); */
      body {
        /* font-family: 'Roboto', sans-serif; */ /* Font dasar yang mudah dibaca */
        overflow: hidden; /* Mencegah scroll bar jika canvas pas */
        margin: 0; /* Menghilangkan margin default body */
      }
      /* Jika Anda menggunakan font kustom, tambahkan kelasnya di Tailwind config atau di sini */
      /* .font-fantasy { font-family: 'MedievalSharp', cursive; } */

      /* Styling untuk kursor terkunci (opsional, jika JS Anda menanganinya) */
      canvas:active,
      body.pointer-locked {
        cursor: none;
      }

      /* Pastikan canvas Three.js mengisi layar */
      #three-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0; /* Di belakang elemen UI lainnya */
      }
    </style>
  </head>
  <body class="bg-slate-900 text-gray-200">
    <!-- Elemen Info dengan Latar Belakang Transparan dan Gaya Fantasi -->
    <div
      id="info"
      class="fixed top-4 left-4 z-10 p-5 bg-black/70 backdrop-blur-sm border border-yellow-400/50 rounded-lg shadow-xl max-w-md text-sm"
      style="display: none"
      >
      <h2
        class="text-xl font-bold text-amber-300 mb-3 border-b border-amber-500/30 pb-2">
        Peta Dunia Mystica
      </h2>
      <p class="mb-2">
        Tekan
        <kbd
          class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
          >M</kbd
        >
        untuk ganti mode kamera (Rotasi / WASD).
      </p>
      <div class="mb-2">
        <strong class="text-amber-200">Mode Rotasi:</strong>
        <ul class="list-disc list-inside ml-4 text-gray-300">
          <li>Klik & seret untuk rotasi</li>
          <li>Scroll untuk zoom</li>
        </ul>
      </div>
      <div>
        <strong class="text-amber-200">Mode WASD:</strong>
        <ul class="list-disc list-inside ml-4 text-gray-300">
          <li>Klik untuk mengunci kursor</li>
          <li>Gerakkan mouse untuk melihat</li>
          <li>
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >W</kbd
            >: Maju,
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >S</kbd
            >: Mundur
          </li>
          <li>
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >A</kbd
            >: Kiri,
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >D</kbd
            >: Kanan
          </li>
          <li>
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >Spasi</kbd
            >: Naik,
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >Shift</kbd
            >: Turun
          </li>
          <li>
            <kbd
              class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-300 border border-gray-400 rounded-md"
              >R</kbd
            >: Tembak (Mode WASD)
          </li>
        </ul>
      </div>
    </div>

    <!-- Layar Menu Play -->
    <div
      id="play-menu-screen"
      class="fixed inset-0 bg-slate-900/95 backdrop-blur-md text-amber-300 flex flex-col justify-center items-center z-[1000] transition-opacity duration-500 ease-in-out"
    >
      <h1
        class="text-6xl font-bold text-amber-400 mb-8"
        style="
          font-family: 'MedievalSharp', cursive;
          text-shadow: 2px 2px 4px #000000;
        "
      >
        Mystica Fantasy
      </h1>
      <p class="text-xl text-gray-300 mb-12">
        Petualangan menantimu di dunia yang penuh keajaiban.
      </p>
      <button
        id="play-button"
        class="px-10 py-5 bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold text-2xl rounded-lg shadow-xl transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50"
        style="font-family: 'MedievalSharp', cursive"
      >
        Mulai Petualangan
      </button>
      <p class="mt-20 text-sm text-gray-500">Versi 0.1.0</p>
    </div>

    <!-- Layar Loading dengan Gaya Fantasi -->
    <div
      id="loading-screen"
      class="fixed inset-0 bg-slate-800 text-amber-300 flex flex-col justify-center items-center z-[999] transition-opacity duration-500 ease-in-out opacity-0"
      style="display: none">
      <svg
        class="animate-spin h-12 w-12 text-amber-400 mb-4"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
        ></path>
      </svg>
      <p class="text-3xl mb-2">Memuat Dunia Mystica...</p>
      <p class="text-xl"><span id="progress">0</span>%</p>
    </div>

    <!-- Canvas Three.js akan ditambahkan oleh renderer.js ke body -->
    <!-- <canvas id="three-canvas"></canvas> -->

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <script type="module" src="js/main.js"></script>
    <script>
      // Skrip kecil untuk menyembunyikan layar loading setelah selesai
      // Logika ini sekarang sebagian besar ada di uiHelper.js dan dikontrol dari main.js
      // const loadingScreenHTML = document.getElementById("loading-screen");
      // const progressElementHTML = document.getElementById("progress");

      // function hideLoadingScreenFromHTML() {
      //   if (loadingScreenHTML) {
      //     loadingScreenHTML.classList.add("opacity-0");
      //     setTimeout(() => {
      //       loadingScreenHTML.style.display = "none";
      //     }, 500);
      //   }
      // }
      // Panggilan hideLoadingScreen() sekarang dari dalam modelLoader.js via uiHelper.js
    </script>
  </body>
</html>
